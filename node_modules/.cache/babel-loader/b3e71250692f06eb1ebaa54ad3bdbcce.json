{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\minhd\\\\Desktop\\\\marketplaceraca\\\\src\\\\components\\\\Sales.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Table from '@mui/material/Table';\nimport { numberWithCommas } from './NFTs/PriceTable';\nimport axios from 'axios';\nimport { TextField, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Button } from '@mui/material';\nimport { initializeApp } from \"firebase/app\";\nimport firebaseConfig from \"../config\";\nimport { collection, getDocs, getFirestore, query, orderBy } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction createData(name, totalSales, totalCost, totalWithdraw, percent) {\n  const sales = totalSales * percent / 100;\n  const cost = totalCost * percent / 100;\n  const profit = sales - cost;\n  const withdraw = totalWithdraw * percent / 100;\n  const remain = profit - withdraw;\n  return {\n    name,\n    sales,\n    cost,\n    profit,\n    withdraw,\n    remain\n  };\n}\n\nconst getHistory = (page, size) => {\n  return axios.get(`https://market-api.radiocaca.com/users/0x10201091597635eC7b8e208306E6aDCC7c167925/histories?pageNo=${page}&pageSize=${size}`);\n};\n\nconst Sales = () => {\n  _s();\n\n  const [listHistory, setListHistory] = useState([]);\n  const [listSummary, setListSummary] = useState([]);\n  const [listWithdraw, setListWithdraw] = useState([]);\n  useEffect(async () => {\n    let total = 0;\n    let currentPage = 1;\n    let listTemp = [];\n    let size = 10;\n\n    const fetchData = async () => {\n      do {\n        const response = await getHistory(currentPage, size);\n        currentPage++;\n        total = response.data.total;\n        listTemp = [...listTemp, ...response.data.list];\n      } while (listTemp.length < total);\n\n      setListHistory(listTemp);\n    };\n\n    fetchData();\n    const app = initializeApp(firebaseConfig);\n    const db = getFirestore(app);\n    const q = query(collection(db, \"Transaction\"), orderBy(\"time\"));\n    const querySnapshot = await getDocs(q);\n    const tempList = [];\n    querySnapshot.forEach(doc => {\n      tempList.push(doc.data());\n    });\n    setListWithdraw(tempList);\n    return () => {\n      setListHistory([]);\n      setListWithdraw([]);\n    };\n  }, []);\n  useEffect(() => {\n    const listSales = listHistory.filter(item => item.nft_token_id === 407301);\n    const listCost = listHistory.filter(item => item.nft_token_id === 403545);\n    const sumSales = listSales.reduce((prev, curr) => {\n      return prev + (Number(curr.amount) - Number(curr.fee));\n    }, 0);\n    const sumCost = listCost.reduce((prev, curr) => {\n      return prev + Number(curr.amount);\n    }, 0);\n    let withdraw = 288131;\n    setListSummary([createData(\"Johny Duc\", sumSales, sumCost, withdraw, 40), createData(\"Khang Pug\", sumSales, sumCost, withdraw, 40), createData(\"Duc Professor\", sumSales, sumCost, withdraw, 20), createData(\"Total\", sumSales, sumCost, withdraw, 100)]);\n  }, [listHistory]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sales\",\n    children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n      id: \"sales-section\",\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        sx: {\n          minWidth: 650\n        },\n        \"aria-label\": \"simple table\",\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Sales\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Cost\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Profit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Withdraw\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Remain\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: listSummary && listSummary.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n            sx: {\n              '&:last-child td, &:last-child th': {\n                border: 0\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              component: \"th\",\n              scope: \"row\",\n              children: row.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: numberWithCommas(row.sales)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: numberWithCommas(row.cost)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: numberWithCommas(row.profit)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: numberWithCommas(row.withdraw)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: numberWithCommas(row.remain)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this)]\n          }, row.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"withdraw-history\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: 'left'\n        },\n        children: \"Withdraw History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"addTransaction\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          type: \"date\",\n          placeholder: \"dd-mm-yyyy\",\n          variant: \"outlined\",\n          size: \"small\",\n          style: {\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"number\",\n          label: \"Amount\",\n          variant: \"outlined\",\n          size: \"small\",\n          style: {\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Notes\",\n          variant: \"outlined\",\n          size: \"small\",\n          id: \"notes\",\n          style: {\n            marginBottom: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"medium\",\n          variant: \"contained\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        id: \"withdraw\",\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          sx: {\n            minWidth: 250\n          },\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: \"Note\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: listHistory && listHistory.map(row => /*#__PURE__*/_jsxDEV(TableRow, {\n              sx: {\n                '&:last-child td, &:last-child th': {\n                  border: 0\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: row.Count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: numberWithCommas(row.sales)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: numberWithCommas(row.cost)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 37\n              }, this)]\n            }, row.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Sales, \"VSBuaUVCKAXqwa4qW1bvc0lzuWo=\");\n\n_c = Sales;\nexport default Sales;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sales\");","map":{"version":3,"sources":["C:/Users/minhd/Desktop/marketplaceraca/src/components/Sales.js"],"names":["useEffect","useState","Table","numberWithCommas","axios","TextField","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","initializeApp","firebaseConfig","collection","getDocs","getFirestore","query","orderBy","createData","name","totalSales","totalCost","totalWithdraw","percent","sales","cost","profit","withdraw","remain","getHistory","page","size","get","Sales","listHistory","setListHistory","listSummary","setListSummary","listWithdraw","setListWithdraw","total","currentPage","listTemp","fetchData","response","data","list","length","app","db","q","querySnapshot","tempList","forEach","doc","push","listSales","filter","item","nft_token_id","listCost","sumSales","reduce","prev","curr","Number","amount","fee","sumCost","minWidth","map","row","border","textAlign","marginBottom","Count","id"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport Table from '@mui/material/Table';\r\nimport { numberWithCommas } from './NFTs/PriceTable'\r\nimport axios from 'axios';\r\nimport { TextField, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Button } from '@mui/material';\r\nimport { initializeApp } from \"firebase/app\";\r\nimport firebaseConfig from \"../config\"\r\nimport { collection, getDocs, getFirestore, query, orderBy } from \"firebase/firestore\";\r\n\r\nfunction createData(name, totalSales, totalCost, totalWithdraw, percent) {\r\n    const sales = totalSales * percent / 100;\r\n    const cost = totalCost * percent / 100;\r\n    const profit = (sales - cost);\r\n    const withdraw = totalWithdraw * percent / 100;\r\n    const remain = profit - withdraw;\r\n    return { name, sales, cost, profit, withdraw, remain };\r\n}\r\n\r\nconst getHistory = (page, size) => {\r\n    return axios.get(`https://market-api.radiocaca.com/users/0x10201091597635eC7b8e208306E6aDCC7c167925/histories?pageNo=${page}&pageSize=${size}`);\r\n\r\n}\r\n\r\n\r\nconst Sales = () => {\r\n    const [listHistory, setListHistory] = useState([]);\r\n    const [listSummary, setListSummary] = useState([]);\r\n    const [listWithdraw, setListWithdraw] = useState([]);\r\n    useEffect(async () => {\r\n        let total = 0;\r\n        let currentPage = 1;\r\n        let listTemp = [];\r\n        let size = 10;\r\n        const fetchData = async () => {\r\n            do {\r\n                const response = await getHistory(currentPage, size)\r\n                currentPage++;\r\n                total = response.data.total;\r\n                listTemp = [...listTemp, ...response.data.list]\r\n            } while (listTemp.length < total)\r\n            setListHistory(listTemp)\r\n        }\r\n        fetchData();\r\n\r\n        const app = initializeApp(firebaseConfig);\r\n        const db = getFirestore(app);\r\n\r\n        const q = query(collection(db, \"Transaction\"), orderBy(\"time\"));\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        const tempList = [];\r\n        querySnapshot.forEach((doc) => {\r\n            tempList.push(doc.data());\r\n        });\r\n        setListWithdraw(tempList);\r\n        return () => {\r\n            setListHistory([])\r\n            setListWithdraw([])\r\n        }\r\n\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        const listSales = listHistory.filter(item => item.nft_token_id === 407301)\r\n        const listCost = listHistory.filter(item => item.nft_token_id === 403545)\r\n\r\n        const sumSales = listSales.reduce((prev, curr) => {\r\n            return prev + (Number(curr.amount) - Number(curr.fee))\r\n        }, 0);\r\n        const sumCost = listCost.reduce((prev, curr) => {\r\n            return prev + Number(curr.amount)\r\n        }, 0);\r\n\r\n        let withdraw = 288131;\r\n\r\n        setListSummary([\r\n            createData(\"Johny Duc\", sumSales, sumCost, withdraw, 40),\r\n            createData(\"Khang Pug\", sumSales, sumCost, withdraw, 40),\r\n            createData(\"Duc Professor\", sumSales, sumCost, withdraw, 20),\r\n            createData(\"Total\", sumSales, sumCost, withdraw, 100),\r\n        ]);\r\n\r\n    }, [listHistory])\r\n    return (\r\n        <div className=\"sales\">\r\n            <TableContainer id=\"sales-section\" component={Paper}>\r\n                <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell>Name</TableCell>\r\n                            <TableCell align=\"center\">Sales</TableCell>\r\n                            <TableCell align=\"center\">Cost</TableCell>\r\n                            <TableCell align=\"center\">Profit</TableCell>\r\n                            <TableCell align=\"center\">Withdraw</TableCell>\r\n                            <TableCell align=\"center\">Remain</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {listSummary && listSummary.map((row) => (\r\n                            <TableRow\r\n                                key={row.name}\r\n                                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                            >\r\n                                <TableCell component=\"th\" scope=\"row\">\r\n                                    {row.name}\r\n                                </TableCell>\r\n                                <TableCell align=\"center\">{numberWithCommas(row.sales)}</TableCell>\r\n                                <TableCell align=\"center\">{numberWithCommas(row.cost)}</TableCell>\r\n                                <TableCell align=\"center\">{numberWithCommas(row.profit)}</TableCell>\r\n                                <TableCell align=\"center\">{numberWithCommas(row.withdraw)}</TableCell>\r\n                                <TableCell align=\"center\">{numberWithCommas(row.remain)}</TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n            <div id=\"withdraw-history\">\r\n                <h2 style={{\r\n                    textAlign: 'left'\r\n                }}>Withdraw History</h2>\r\n                <div id=\"addTransaction\">\r\n                    <TextField\r\n                        type='date'\r\n                        placeholder=\"dd-mm-yyyy\"\r\n                        variant=\"outlined\" size=\"small\"\r\n                        style={{ marginBottom: '10px' }}\r\n                    />\r\n                    <TextField\r\n                        type='number'\r\n                        label=\"Amount\"\r\n                        variant=\"outlined\" size=\"small\"\r\n                        style={{ marginBottom: '10px' }} />\r\n                    <TextField\r\n                        label=\"Notes\" variant=\"outlined\" size=\"small\" id=\"notes\"\r\n                        style={{ marginBottom: '10px' }} />\r\n                    <Button size=\"medium\" variant=\"contained\">Add</Button>\r\n\r\n                </div>\r\n                <TableContainer id='withdraw' component={Paper}>\r\n                    <Table sx={{ minWidth: 250 }} aria-label=\"simple table\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Time</TableCell>\r\n                                <TableCell align=\"center\">Amount</TableCell>\r\n                                <TableCell align=\"center\">Note</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {listHistory && listHistory.map((row) => (\r\n                                <TableRow\r\n                                    key={row.id}\r\n                                    sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                                >\r\n                                    <TableCell component=\"th\" scope=\"row\">\r\n                                        {row.Count}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">{numberWithCommas(row.sales)}</TableCell>\r\n                                    <TableCell align=\"center\">{numberWithCommas(row.cost)}</TableCell>\r\n\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Sales;"]},"metadata":{},"sourceType":"module"}