{"ast":null,"code":"import _objectSpread from\"C:/Users/minhd/Desktop/marketplaceraca/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/minhd/Desktop/marketplaceraca/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/minhd/Desktop/marketplaceraca/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/minhd/Desktop/marketplaceraca/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React from'react';import{useEffect,useState}from'react';import InputFilters from'./InputFilters';import'../../styles/elemon.css';import{Box,CircularProgress,Grid}from'@mui/material';import InfoCard from'./InfoCard';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getElemonItem=function getElemonItem(){var pageNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;var priceMode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;var baseCardId=arguments.length>3?arguments[3]:undefined;var tokenId=arguments.length>4?arguments[4]:undefined;var rarities=arguments.length>5?arguments[5]:undefined;var classes=arguments.length>6?arguments[6]:undefined;var purities=arguments.length>7?arguments[7]:undefined;return axios.get(\"https://app.elemon.io/market/getElemonItems?pageNumber=\".concat(pageNumber,\"&pageSize=\").concat(pageSize,\"&positionType=2&priceMode=\").concat(priceMode,\"&baseCardId=&tokenId=&rarities=&classes=&purities=\")).then(function(res){return res.data;},{headers:{\"Access-Control-Allow-Origin\":\"*\"}});};var getElemonInfo=function getElemonInfo(listElemon){var listTokenId=listElemon.map(function(item){return item.tokenId;});// console.log(listTokenId)\nreturn axios.get(\"https://app.elemon.io/elemon/GetElemonInfo?tokenId=\".concat(listTokenId===null||listTokenId===void 0?void 0:listTokenId.join(','))).then(function(res){return res.data;},{headers:{\"Access-Control-Allow-Origin\":\"*\"}}).catch(function(error){return error;});};var Elemon=function Elemon(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listElemon=_useState2[0],setListElemon=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),listElemonInfo=_useState4[0],setListElemonInfo=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),timeUpdated=_useState6[0],setTimeUpdated=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),listFilter=_useState10[0],setListFilter=_useState10[1];var _useSelector=useSelector(function(state){return state.filtersElemon;}),min=_useSelector.min,max=_useSelector.max,sort=_useSelector.sort;var convertDateTime=function convertDateTime(){var now=new Date();setTimeUpdated(now.toLocaleString());};useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getElemonItem(1,100).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getElemonItem(1,res.paging.totalCount).then(function(res){return setListElemon(res.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function getData(){return _ref.apply(this,arguments);};}();getData();convertDateTime();return function(){setListElemon([]);};},[]);useEffect(function(){var getInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var lengthList,loop,_loop,i;return _regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoading(true);// while()\nlengthList=listElemon.length;loop=lengthList%100===0?lengthList/100:lengthList/100+1;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(i){var amount;return _regeneratorRuntime.wrap(function _loop$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:amount=lengthList%100!==0&&lengthList-i*100<0?(i-1)*100+lengthList%100:i*100;// console.log((i - 1) * 100, amount)\n_context3.next=3;return getElemonInfo(listElemon===null||listElemon===void 0?void 0:listElemon.slice((i-1)*100,amount)).then(function(res){var listInfo=listElemon.slice((i-1)*100,amount).map(function(item,index){var _res$data$index;return _objectSpread(_objectSpread({},item),{},{point:(_res$data$index=res.data[index])===null||_res$data$index===void 0?void 0:_res$data$index.point});});setListElemonInfo(function(pre){return pre.concat(listInfo);});});case 3:case\"end\":return _context3.stop();}}},_loop);});i=1;case 5:if(!(i<=loop)){_context4.next=10;break;}return _context4.delegateYield(_loop(i),\"t0\",7);case 7:i++;_context4.next=5;break;case 10:setLoading(false);case 11:case\"end\":return _context4.stop();}}},_callee3);}));return function getInfo(){return _ref3.apply(this,arguments);};}();getInfo();return function(){setListElemonInfo(function(prev){return[];});};},[listElemon]);useEffect(function(){var filter=listElemonInfo.filter(function(elemon){return elemon.point>=min&&elemon.point<=max;}).sort(function(a,b){if(sort==0){return a.lastPrice>b.lastPrice?1:-1;}else{return a.lastPrice<b.lastPrice?1:-1;}});setListFilter(filter);},[listElemonInfo,min,max,sort]);return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(InputFilters,{}),/*#__PURE__*/_jsx(\"p\",{className:\"timeUpdate\",children:timeUpdated}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:listFilter&&(listFilter===null||listFilter===void 0?void 0:listFilter.slice(0,100).map(function(item,index){return/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:4,lg:2.2,children:/*#__PURE__*/_jsx(InfoCard,{elemon:item})},index);}))}),loading&&/*#__PURE__*/_jsx(CircularProgress,{})]})});};export default Elemon;","map":{"version":3,"sources":["C:/Users/minhd/Desktop/marketplaceraca/src/components/Elemon/Elemon.js"],"names":["axios","React","useEffect","useState","InputFilters","Box","CircularProgress","Grid","InfoCard","useSelector","getElemonItem","pageNumber","pageSize","priceMode","baseCardId","tokenId","rarities","classes","purities","get","then","res","data","headers","getElemonInfo","listElemon","listTokenId","map","item","join","catch","error","Elemon","setListElemon","listElemonInfo","setListElemonInfo","timeUpdated","setTimeUpdated","loading","setLoading","listFilter","setListFilter","state","filtersElemon","min","max","sort","convertDateTime","now","Date","toLocaleString","getData","paging","totalCount","getInfo","lengthList","length","loop","i","amount","slice","listInfo","index","point","pre","concat","prev","filter","elemon","a","b","lastPrice","textAlign"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAO,yBAAP,CACA,OAASC,GAAT,CAAcC,gBAAd,CAAgCC,IAAhC,KAA4C,eAA5C,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAoG,IAAnGC,CAAAA,UAAmG,2DAAtF,CAAsF,IAAnFC,CAAAA,QAAmF,2DAAxE,EAAwE,IAApEC,CAAAA,SAAoE,2DAAxD,CAAwD,IAArDC,CAAAA,UAAqD,8CAAzCC,CAAAA,OAAyC,8CAAhCC,CAAAA,QAAgC,8CAAtBC,CAAAA,OAAsB,8CAAbC,CAAAA,QAAa,2CACtH,MAAOlB,CAAAA,KAAK,CAACmB,GAAN,kEAAoER,UAApE,sBAA2FC,QAA3F,sCAAgIC,SAAhI,wDAA+LO,IAA/L,CAAoM,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAAvM,CAAqN,CACxNC,OAAO,CAAE,CACL,8BAA+B,GAD1B,CAD+M,CAArN,CAAP,CAKH,CAND,CAOA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAgB,CAClC,GAAMC,CAAAA,WAAW,CAAGD,UAAU,CAACE,GAAX,CAAe,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACb,OAAT,EAAnB,CAApB,CACA;AACA,MAAOf,CAAAA,KAAK,CAACmB,GAAN,8DAAgEO,WAAhE,SAAgEA,WAAhE,iBAAgEA,WAAW,CAAEG,IAAb,CAAkB,GAAlB,CAAhE,GAA0FT,IAA1F,CAA+F,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAAlG,CAAgH,CACnHC,OAAO,CAAE,CACL,8BAA+B,GAD1B,CAD0G,CAAhH,EAIJO,KAJI,CAIE,SAAAC,KAAK,QAAKA,CAAAA,KAAL,EAJP,CAAP,CAKH,CARD,CAUA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,cAAoC7B,QAAQ,CAAC,EAAD,CAA5C,wCAAOsB,UAAP,eAAmBQ,aAAnB,eACA,eAA4C9B,QAAQ,CAAC,EAAD,CAApD,yCAAO+B,cAAP,eAAuBC,iBAAvB,eACA,eAAsChC,QAAQ,CAAC,EAAD,CAA9C,yCAAOiC,WAAP,eAAoBC,cAApB,eACA,eAA8BlC,QAAQ,CAAC,IAAD,CAAtC,yCAAOmC,OAAP,eAAgBC,UAAhB,eACA,eAAoCpC,QAAQ,CAAC,EAAD,CAA5C,0CAAOqC,UAAP,gBAAmBC,aAAnB,gBAEA,iBAA2BhC,WAAW,CAAC,SAAAiC,KAAK,QAAIA,CAAAA,KAAK,CAACC,aAAV,EAAN,CAAtC,CAAQC,GAAR,cAAQA,GAAR,CAAaC,GAAb,cAAaA,GAAb,CAAkBC,IAAlB,cAAkBA,IAAlB,CACA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1B,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,EAAZ,CACAZ,cAAc,CAACW,GAAG,CAACE,cAAJ,EAAD,CAAd,CACH,CAHD,CAIAhD,SAAS,CAAC,UAAM,CACZ,GAAMiD,CAAAA,OAAO,0FAAG,+JACNzC,CAAAA,aAAa,CAAC,CAAD,CAAI,GAAJ,CAAb,CAAsBU,IAAtB,2FAA2B,iBAAOC,GAAP,wIACvBX,CAAAA,aAAa,CAAC,CAAD,CAAIW,GAAG,CAAC+B,MAAJ,CAAWC,UAAf,CAAb,CAAwCjC,IAAxC,CAA6C,SAAAC,GAAG,QAAIY,CAAAA,aAAa,CAACZ,GAAG,CAACC,IAAL,CAAjB,EAAhD,CADuB,uDAA3B,gEADM,yDAAH,kBAAP6B,CAAAA,OAAO,0CAAb,CAMAA,OAAO,GACPJ,eAAe,GAEf,MAAO,WAAM,CACTd,aAAa,CAAC,EAAD,CAAb,CACH,CAFD,CAGH,CAbQ,CAaN,EAbM,CAAT,CAeA/B,SAAS,CAAC,UAAM,CACZ,GAAMoD,CAAAA,OAAO,2FAAG,oKACZf,UAAU,CAAC,IAAD,CAAV,CACA;AACMgB,UAHM,CAGO9B,UAAU,CAAC+B,MAHlB,CAINC,IAJM,CAICF,UAAU,CAAG,GAAb,GAAqB,CAArB,CAAyBA,UAAU,CAAG,GAAtC,CAA4CA,UAAU,CAAG,GAAb,CAAmB,CAJhE,4DAKHG,CALG,8HAMFC,MANE,CAMOJ,UAAU,CAAG,GAAb,GAAqB,CAArB,EAA0BA,UAAU,CAAIG,CAAC,CAAG,GAAlB,CAAyB,CAAnD,CAAwD,CAACA,CAAC,CAAG,CAAL,EAAU,GAAX,CAAmBH,UAAU,CAAG,GAAvF,CAA8FG,CAAC,CAAG,GANzG,CAOR;AAPQ,uBAQFlC,CAAAA,aAAa,CAACC,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAEmC,KAAZ,CAAkB,CAACF,CAAC,CAAG,CAAL,EAAU,GAA5B,CAAiCC,MAAjC,CAAD,CAAb,CAAwDvC,IAAxD,CAA6D,SAAAC,GAAG,CAAI,CACtE,GAAMwC,CAAAA,QAAQ,CAAGpC,UAAU,CAACmC,KAAX,CAAiB,CAACF,CAAC,CAAG,CAAL,EAAU,GAA3B,CAAgCC,MAAhC,EAAwChC,GAAxC,CAA4C,SAACC,IAAD,CAAOkC,KAAP,CAAiB,qBAC1E,sCACOlC,IADP,MAEImC,KAAK,kBAAE1C,GAAG,CAACC,IAAJ,CAASwC,KAAT,CAAF,0CAAE,gBAAiBC,KAF5B,GAIH,CALgB,CAAjB,CAMA5B,iBAAiB,CAAC,SAAA6B,GAAG,QAAIA,CAAAA,GAAG,CAACC,MAAJ,CAAWJ,QAAX,CAAJ,EAAJ,CAAjB,CACH,CARK,CARE,wDAKHH,CALG,CAKC,CALD,aAKIA,CAAC,EAAID,IALT,iEAKHC,CALG,iBAKeA,CAAC,EALhB,gCAkBZnB,UAAU,CAAC,KAAD,CAAV,CAlBY,yDAAH,kBAAPe,CAAAA,OAAO,2CAAb,CAoBAA,OAAO,GACP,MAAO,WAAM,CACTnB,iBAAiB,CAAC,SAAC+B,IAAD,QAAU,EAAV,EAAD,CAAjB,CACH,CAFD,CAGH,CAzBQ,CAyBN,CAACzC,UAAD,CAzBM,CAAT,CA2BAvB,SAAS,CAAC,UAAM,CACZ,GAAMiE,CAAAA,MAAM,CAAGjC,cAAc,CAACiC,MAAf,CAAsB,SAAAC,MAAM,QAAIA,CAAAA,MAAM,CAACL,KAAP,EAAgBnB,GAAhB,EAAuBwB,MAAM,CAACL,KAAP,EAAgBlB,GAA3C,EAA5B,EAA4EC,IAA5E,CAAiF,SAACuB,CAAD,CAAIC,CAAJ,CAAU,CACtG,GAAIxB,IAAI,EAAI,CAAZ,CAAe,CACX,MAAOuB,CAAAA,CAAC,CAACE,SAAF,CAAcD,CAAC,CAACC,SAAhB,CAA4B,CAA5B,CAAgC,CAAC,CAAxC,CACH,CAFD,IAGK,CACD,MAAOF,CAAAA,CAAC,CAACE,SAAF,CAAcD,CAAC,CAACC,SAAhB,CAA4B,CAA5B,CAAgC,CAAC,CAAxC,CACH,CAEJ,CARc,CAAf,CASA9B,aAAa,CAAC0B,MAAD,CAAb,CACH,CAXQ,CAWN,CAACjC,cAAD,CAAiBU,GAAjB,CAAsBC,GAAtB,CAA2BC,IAA3B,CAXM,CAAT,CAcA,mBACI,KAAC,GAAD,wBACI,MAAC,GAAD,EAAK,EAAE,CAAE,CAAE0B,SAAS,CAAE,QAAb,CAAT,wBACI,KAAC,YAAD,IADJ,cAEI,UAAG,SAAS,CAAC,YAAb,UAA2BpC,WAA3B,EAFJ,cAGI,KAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,UACKI,UAAU,GAAIA,UAAJ,SAAIA,UAAJ,iBAAIA,UAAU,CAAEoB,KAAZ,CAAkB,CAAlB,CAAqB,GAArB,EAA0BjC,GAA1B,CAA8B,SAACC,IAAD,CAAOkC,KAAP,qBACzC,KAAC,IAAD,EAAkB,IAAI,KAAtB,CAAuB,EAAE,CAAE,CAA3B,CAA8B,EAAE,CAAE,CAAlC,CAAqC,EAAE,CAAE,GAAzC,uBACI,KAAC,QAAD,EAAU,MAAM,CAAElC,IAAlB,EADJ,EAAWkC,KAAX,CADyC,EAA9B,CAAJ,CADf,EAHJ,CAUKxB,OAAO,eAAI,KAAC,gBAAD,IAVhB,GADJ,EADJ,CAgBH,CApFD,CAsFA,cAAeN,CAAAA,MAAf","sourcesContent":["import axios from 'axios';\r\nimport React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport InputFilters from './InputFilters';\r\nimport '../../styles/elemon.css';\r\nimport { Box, CircularProgress, Grid } from '@mui/material';\r\nimport InfoCard from './InfoCard';\r\nimport { useSelector } from 'react-redux';\r\n\r\n\r\nconst getElemonItem = (pageNumber = 1, pageSize = 20, priceMode = 2, baseCardId, tokenId, rarities, classes, purities) => {\r\n    return axios.get(`https://app.elemon.io/market/getElemonItems?pageNumber=${pageNumber}&pageSize=${pageSize}&positionType=2&priceMode=${priceMode}&baseCardId=&tokenId=&rarities=&classes=&purities=`).then(res => res.data, {\r\n        headers: {\r\n            \"Access-Control-Allow-Origin\": \"*\"\r\n        }\r\n    });\r\n}\r\nconst getElemonInfo = (listElemon) => {\r\n    const listTokenId = listElemon.map(item => item.tokenId);\r\n    // console.log(listTokenId)\r\n    return axios.get(`https://app.elemon.io/elemon/GetElemonInfo?tokenId=${listTokenId?.join(',')}`).then(res => res.data, {\r\n        headers: {\r\n            \"Access-Control-Allow-Origin\": \"*\"\r\n        }\r\n    }).catch(error => (error));\r\n}\r\n\r\nconst Elemon = () => {\r\n    const [listElemon, setListElemon] = useState([]);\r\n    const [listElemonInfo, setListElemonInfo] = useState([]);\r\n    const [timeUpdated, setTimeUpdated] = useState(\"\")\r\n    const [loading, setLoading] = useState(true);\r\n    const [listFilter, setListFilter] = useState([]);\r\n\r\n    const { min, max, sort } = useSelector(state => state.filtersElemon)\r\n    const convertDateTime = () => {\r\n        const now = new Date();\r\n        setTimeUpdated(now.toLocaleString())\r\n    }\r\n    useEffect(() => {\r\n        const getData = async () => {\r\n            await getElemonItem(1, 100).then(async (res) => {\r\n                await getElemonItem(1, res.paging.totalCount).then(res => setListElemon(res.data));\r\n            });\r\n        }\r\n\r\n        getData();\r\n        convertDateTime()\r\n\r\n        return () => {\r\n            setListElemon([]);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const getInfo = async () => {\r\n            setLoading(true)\r\n            // while()\r\n            const lengthList = listElemon.length;\r\n            const loop = lengthList % 100 === 0 ? lengthList / 100 : lengthList / 100 + 1;\r\n            for (let i = 1; i <= loop; i++) {\r\n                const amount = lengthList % 100 !== 0 && lengthList - (i * 100) < 0 ? ((i - 1) * 100) + (lengthList % 100) : i * 100\r\n                // console.log((i - 1) * 100, amount)\r\n                await getElemonInfo(listElemon?.slice((i - 1) * 100, amount)).then(res => {\r\n                    const listInfo = listElemon.slice((i - 1) * 100, amount).map((item, index) => {\r\n                        return {\r\n                            ...item,\r\n                            point: res.data[index]?.point,\r\n                        }\r\n                    });\r\n                    setListElemonInfo(pre => pre.concat(listInfo))\r\n                })\r\n            }\r\n            setLoading(false);\r\n        }\r\n        getInfo();\r\n        return () => {\r\n            setListElemonInfo((prev) => []);\r\n        }\r\n    }, [listElemon]);\r\n\r\n    useEffect(() => {\r\n        const filter = listElemonInfo.filter(elemon => elemon.point >= min && elemon.point <= max).sort((a, b) => {\r\n            if (sort == 0) {\r\n                return a.lastPrice > b.lastPrice ? 1 : -1;\r\n            }\r\n            else {\r\n                return a.lastPrice < b.lastPrice ? 1 : -1;\r\n            }\r\n\r\n        })\r\n        setListFilter(filter)\r\n    }, [listElemonInfo, min, max, sort]);\r\n\r\n\r\n    return (\r\n        <Box>\r\n            <Box sx={{ textAlign: 'center' }}>\r\n                <InputFilters />\r\n                <p className='timeUpdate'>{timeUpdated}</p>\r\n                <Grid container spacing={1}>\r\n                    {listFilter && listFilter?.slice(0, 100).map((item, index) => (\r\n                        <Grid key={index} item xs={6} md={4} lg={2.2}>\r\n                            <InfoCard elemon={item} />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n                {loading && <CircularProgress />}\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Elemon;\r\n"]},"metadata":{},"sourceType":"module"}