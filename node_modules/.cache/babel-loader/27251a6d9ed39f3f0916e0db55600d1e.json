{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\minhd\\\\Desktop\\\\marketplaceraca\\\\src\\\\context\\\\AppContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from 'react';\nimport useRouter from './useRouter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AppContext = /*#__PURE__*/createContext();\nexport const AppProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [appStatus, setAppStatus] = useState('loading');\n  const [currentAccount, setCurrentAccount] = useState('');\n  useEffect(() => {\n    checkIfWalletConnected();\n    window.ethereum.on('accountsChanged', async () => {\n      checkIfWalletConnected();\n    });\n  }, []);\n\n  const checkIfWalletConnected = async () => {\n    if (!window.ethereum) return setAppStatus('noMetamask');\n\n    try {\n      const addressArray = await window.ethereum.request({\n        method: 'eth_accounts'\n      });\n      const getBalanceAccount = await window.ethereum.request({\n        method: 'eth_getBalance',\n        params: [addressArray[0], 'latest'],\n        jsonrpc: \"2.0\",\n        id: '1'\n      });\n      console.log(getBalanceAccount);\n\n      if (addressArray.length > 0) {\n        //connected\n        console.log(addressArray);\n        setAppStatus('connected');\n        setCurrentAccount(addressArray[0]);\n      } else {\n        // not connected\n        setAppStatus('not-connected');\n      }\n    } catch (err) {\n      console.log(err);\n      setAppStatus('error');\n    }\n  };\n\n  const connectToWallet = async () => {\n    if (!window.ethereum) return setAppStatus('noMetamask');\n\n    try {\n      setAppStatus('loading'); // console.log('asdsad')\n      // console.log(window.ethereum);\n\n      const addressArray = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n\n      if (addressArray.length > 0) {\n        setAppStatus('connected');\n        setCurrentAccount(addressArray[0]);\n      } else {\n        setAppStatus('not-connected');\n      }\n    } catch (err) {\n      console.log(err);\n      setAppStatus('error');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      appStatus,\n      currentAccount,\n      connectToWallet\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AppProvider, \"oBR5NRZsmTF7ACYyEwJIsws0nH4=\");\n\n_c = AppProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"sources":["C:/Users/minhd/Desktop/marketplaceraca/src/context/AppContext.js"],"names":["createContext","useEffect","useState","useRouter","AppContext","AppProvider","children","appStatus","setAppStatus","currentAccount","setCurrentAccount","checkIfWalletConnected","window","ethereum","on","addressArray","request","method","getBalanceAccount","params","jsonrpc","id","console","log","length","err","connectToWallet"],"mappings":"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","sourcesContent":["import { createContext, useEffect, useState } from 'react'\r\nimport useRouter from './useRouter'\r\nexport const AppContext = createContext();\r\n\r\nexport const AppProvider = ({ children }) => {\r\n    const [appStatus, setAppStatus] = useState('loading')\r\n    const [currentAccount, setCurrentAccount] = useState('');\r\n\r\n    useEffect(() => {\r\n        checkIfWalletConnected();\r\n        window.ethereum.on('accountsChanged', async () => {\r\n            checkIfWalletConnected();\r\n        })\r\n    }, [])\r\n\r\n    const checkIfWalletConnected = async () => {\r\n        if (!window.ethereum) return setAppStatus('noMetamask')\r\n        try {\r\n            const addressArray = await window.ethereum.request({\r\n                method: 'eth_accounts',\r\n            })\r\n            const getBalanceAccount = await window.ethereum.request({\r\n                method: 'eth_getBalance',\r\n                params: [addressArray[0], 'latest'],\r\n                jsonrpc: \"2.0\",\r\n                id:'1'\r\n            })\r\n            console.log(getBalanceAccount)\r\n            if (addressArray.length > 0) {\r\n                //connected\r\n                console.log(addressArray)\r\n                setAppStatus('connected');\r\n                setCurrentAccount(addressArray[0]);\r\n            } else {\r\n                // not connected\r\n                setAppStatus('not-connected');\r\n            }\r\n\r\n        } catch (err) {\r\n            console.log(err);\r\n            setAppStatus('error')\r\n\r\n        }\r\n    }\r\n\r\n    const connectToWallet = async () => {\r\n        if (!window.ethereum) return setAppStatus('noMetamask')\r\n\r\n        try {\r\n            setAppStatus('loading');\r\n            // console.log('asdsad')\r\n            // console.log(window.ethereum);\r\n            const addressArray = await window.ethereum.request({\r\n                method: 'eth_requestAccounts',\r\n            })\r\n            if (addressArray.length > 0) {\r\n                setAppStatus('connected')\r\n                setCurrentAccount(addressArray[0])\r\n            } else {\r\n                setAppStatus('not-connected')\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n            setAppStatus('error')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AppContext.Provider value={{ appStatus, currentAccount, connectToWallet }}>{children}</AppContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}